import base64
import re

def convert_base64_to_file(base64_string, output_file_path):
    try:
        # Decode the base64 string
        decoded_data = base64.b64decode(base64_string)

        # Write the decoded data to the output file
        with open(output_file_path, 'wb') as output_file:
            output_file.write(decoded_data)

        print(f"File '{output_file_path}' created successfully.")
    except Exception as e:
        print(f"An error occurred: {str(e)}")


# Base64 string to convert
string = "data:text/x-python-script;name=Topology.py;base64,IyEvdXNyL2Jpbi9weXRob24KCiIiIkN1c3RvbSB0b3BvbG9neSBleGFtcGxlCiIiIgpmcm9tIG1pbmluZXQudG9wbyBpbXBvcnQgVG9wbwpmcm9tIG1pbmluZXQubmV0IGltcG9ydCBNaW5pbmV0CmZyb20gbWluaW5ldC5ub2RlIGltcG9ydCBDb250cm9sbGVyLCBSZW1vdGVDb250cm9sbGVyLCBPVlNDb250cm9sbGVyCmZyb20gbWluaW5ldC5ub2RlIGltcG9ydCBDUFVMaW1pdGVkSG9zdCwgSG9zdCwgTm9kZQpmcm9tIG1pbmluZXQubm9kZSBpbXBvcnQgT1ZTS2VybmVsU3dpdGNoLCBVc2VyU3dpdGNoCmZyb20gbWluaW5ldC5ub2RlIGltcG9ydCBJVlNTd2l0Y2gKZnJvbSBtaW5pbmV0LmNsaSBpbXBvcnQgQ0xJCmZyb20gbWluaW5ldC5sb2cgaW1wb3J0IHNldExvZ0xldmVsLCBpbmZvCmZyb20gbWluaW5ldC5saW5rIGltcG9ydCBUQ0xpbmssIEludGYKZnJvbSBzdWJwcm9jZXNzIGltcG9ydCBjYWxsCmZyb20gdGltZSBpbXBvcnQgc2xlZXAKZnJvbSBtaW5pbmV0LnRlcm0gaW1wb3J0IG1ha2VUZXJtcywgbWFrZVRlcm0sIHJ1blgxMQppbXBvcnQgb3MKaW1wb3J0IGpzb24KCgpjbGFzcyBUb3BvbG9neShUb3BvKToKICAgIGRlZiBidWlsZChzZWxmKToKICAgICAgICBzMiA9IHNlbGYuYWRkU3dpdGNoKCdzMicpCiAgICAgICAgaDQgPSBzZWxmLmFkZEhvc3QoJ2g0JywgaXA9IjEwLjAuMC40IiwgbWFjPSIwMDowMDowMDowMDowMDowNCIpCiAgICAgICAgaDUgPSBzZWxmLmFkZEhvc3QoJ2g1JywgaXA9IjEwLjAuMC41IiwgbWFjPSIwMDowMDowMDowMDowMDowNSIpCiAgICAgICAgc2VsZi5hZGRMaW5rKGg0LCBzMikKICAgICAgICBzZWxmLmFkZExpbmsoaDUsIHMyKQoKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBzZXRMb2dMZXZlbCgnaW5mbycpCgogICAgZGVmYXVsdENvbmZpZ1BhdGggPSAie30vY29uZmlnLmpzb24iLmZvcm1hdCgKICAgICAgICBvcy5wYXRoLnJlYWxwYXRoKG9zLnBhdGguZGlybmFtZShfX2ZpbGVfXykpKQoKICAgIGlmIG9zLnBhdGguaXNmaWxlKGRlZmF1bHRDb25maWdQYXRoKToKICAgICAgICB3aXRoIG9wZW4oZGVmYXVsdENvbmZpZ1BhdGgsICJydCIpIGFzIGNvbmZpZ0ZpbGU6CiAgICAgICAgICAgIGNvbmZpZyA9IGpzb24ubG9hZChjb25maWdGaWxlKQoKICAgIHRvcG8gPSBUb3BvbG9neSgpCiAgICBzbGVlcCg1KQogICAgYzEgPSBSZW1vdGVDb250cm9sbGVyKCdjMScsIGlwPWNvbmZpZ1sibmV0d29ya0lQIl0pCiAgICBuZXQgPSBNaW5pbmV0KHRvcG89dG9wbywgY29udHJvbGxlcj1jMSwgbGluaz1UQ0xpbmspCiAgICBuZXQuc3RhcnQoKQoKICAgIG9zLnN5c3RlbSgKICAgICAgICAnb3ZzLXZzY3RsIGFkZC1wb3J0IHMyIGdyZXMgLS0gc2V0IGludGVyZmFjZSBncmVzIHR5cGU9Z3JlIG9wdGlvbnM6cmVtb3RlX2lwPXt9Jy5mb3JtYXQoY29uZmlnWyJuZXR3b3JrSVAiXSkpCgogICAgaG9zdHMgPSBuZXQuaG9zdHMKICAgIGhvc3ROdW1iZXIgPSA1CiAgICBmb3IgaG9zdCBpbiBob3N0czoKICAgICAgICBmb3IgaSBpbiByYW5nZSgxLCBob3N0TnVtYmVyKzEpOgogICAgICAgICAgICBpZiBpIDwgMTA6CiAgICAgICAgICAgICAgICBob3N0LmNtZFByaW50KAogICAgICAgICAgICAgICAgICAgICdhcnAgLXMgMTAuMC4wLnt9IDAwOjAwOjAwOjAwOjAwOjB7fScuZm9ybWF0KGksIGkpKQogICAgICAgICAgICBpZiBpID49IDEwOgogICAgICAgICAgICAgICAgaG9zdC5jbWRQcmludCgKICAgICAgICAgICAgICAgICAgICAnYXJwIC1zIDEwLjAuMC57fSAwMDowMDowMDowMDowMDp7fScuZm9ybWF0KGksIGkpKQoKICAgICMgcHJpbnQoInNsZWVwLi4uLiIpCiAgICAjIHNsZWVwKDMwKQogICAgI2hvc3RzWzBdLmNtZFByaW50KCdweXRob24zIC1tIGRhc2hfZW11bGF0b3IubWFpbiBodHRwOi8vMTAuMC4wLjMvbGl2ZS5tcGQgLS1vdXRwdXQgL3Jvb3QvcmVzdWx0IC15JykKICAgIGhvc3RzWzBdLmNtZFByaW50KCcvdXNyL2xvY2FsL25naW54L3NiaW4vbmdpbngnKQogICAgaG9zdHNbMV0uY21kUHJpbnQoJy91c3IvbG9jYWwvbmdpbngvc2Jpbi9uZ2lueCcpCgogICAgQ0xJKG5ldCkKICAgICMgd2hpbGUgMToKICAgICMgICAgIFRydWUKICAgICMgbmV0LnN0b3AoKQo="

# Extract the file name
file_name = re.search(r'name=(.*?);', string).group(1)

# Split the string after base64
base64_string = string.split(';base64,', 1)[-1]

# Call the function to convert base64 to file
convert_base64_to_file(base64_string, file_name)
